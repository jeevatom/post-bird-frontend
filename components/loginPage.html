<script>
  function funLogin() {

    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if ($('#username').val().trim() == "" || !emailRegex.test($('#username').val())) {
      $(".usernameError").show();
      return false;
    } else {
      $(".usernameError").hide()
    }

    if ($('#password').val().trim() == "" ) {
      $(".passwordError").show();
      return false;
    } else {
      $(".passwordError").hide();
    }



    var url = "http://localhost:8080/user/login";
    var datas = {
      username: $('#username').val(),
      password: $('#password').val()
    };


    $("#btnDiv").html(`<img src="/resources/images/loading.gif" style="height: 100px;width: 100px;" >`)

    $.ajax({
      url: "http://localhost:8080/user/login",
      type: "POST",
      contentType: "application/json",
      data: JSON.stringify(datas),
      success: function (res) {
        localStorage.setItem("token", res.token);
        localStorage.setItem("userName", res.userName);
        localStorage.setItem("roles", res.roles);
        $("#alogin").text("Logout");
        $("#alogin").attr("onclick", "funLogOut()");
      },
      error: function () {
        showModal("Post Bird", "Check username And Password!", "text-danger");
      }
    });



  }
</script>
<link rel="stylesheet" href="resources/css/signuppage.css">
<script src="/resources/js/jquery.js"></script>
<link href="/resources/css/bootstrap.min.css" rel="stylesheet">
<div class="signup-wrapper">
  <div class="signup-card">

    <h2 class="text-center mb-3" style="color: #58a6ff !important;">
      Login to Post Bird
    </h2>
    <p class="text-center text-white mb-4">
      Welcome back! Please login to your account
    </p>

    <form id="loginForm">

      <div class="">
        <label class="form-label text-white">Email </label>
        <input type="text" class="form-control bg-dark text-white" id="username"
          placeholder="Enter your email or username" required>
      </div>
      <span class="text-danger mb-2 usernameError" style="display: none;">Enter a valid email</span>

      <div class="mt-3">
        <label class="form-label text-white">Password</label>
        <input type="password" class="form-control bg-dark text-white" id="password" placeholder="Enter your password"
          required>
      </div>
      <span class="text-danger mb-2 passwordError" style="display: none;">Enter min 6 length Password</span>

      <button type="button" class="btn btn-success w-100 mt-3" onclick="funLogin()">
        Login
      </button>
    </form>

    <p class="text-center text-white small">
      Donâ€™t have an account?
      <a onclick="funLoadSignup()" href="#">Register here</a>
    </p>

  </div>
</div>

</div>